-- JHUB V2 - Premium Gold Version

-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- PLAYER
local player = Players.LocalPlayer
local savedSpawnCFrame = nil
local undergroundDepth = 10
local normalSpeed = 16
local fastSpeed = 30
local speedOn = false

-- CHARACTER SETUP FUNCTION
local function setupCharacter(char)
	local humanoid = char:WaitForChild("Humanoid")
	local root = char:WaitForChild("HumanoidRootPart")

	-- Put underground
	root.CFrame = root.CFrame * CFrame.new(0, -undergroundDepth, 0)

	-- WalkSpeed
	humanoid.WalkSpeed = speedOn and fastSpeed or normalSpeed

	-- Noclip
	local noclipConn
	noclipConn = RunService.Stepped:Connect(function()
		if char.Parent then
			for _, part in pairs(char:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		else
			if noclipConn then noclipConn:Disconnect() end
		end
	end)

	-- Teleport to saved spawn if exists
	if savedSpawnCFrame then
		task.wait(0.1)
		root.CFrame = savedSpawnCFrame
	end
end

-- INITIAL SETUP
if player.Character then
	setupCharacter(player.Character)
end
player.CharacterAdded:Connect(setupCharacter)

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "JHUB_V2"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- DRAGGABLE FUNCTION
local function makeDraggable(button)
	local dragging, dragStart, startPos = false, nil, nil

	button.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = button.Position
		end
	end)

	button.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			button.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)
end

-- BUTTON CLICK ANIMATION
local function buttonPressAnim(btn)
	local origSize = btn.Size
	btn.MouseButton1Down:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.1), {Size = origSize - UDim2.new(0, 10, 0, 6)}):Play()
	end)
	btn.MouseButton1Up:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.1), {Size = origSize}):Play()
	end)
end

-- SPEED BUTTON
local speedButton = Instance.new("TextButton")
speedButton.Size = UDim2.new(0, 180, 0, 50)
speedButton.Position = UDim2.new(0, -200, 0, 100)
speedButton.BackgroundColor3 = Color3.fromRGB(212, 175, 55) -- Gold
speedButton.TextColor3 = Color3.fromRGB(30, 30, 30)
speedButton.TextScaled = true
speedButton.Font = Enum.Font.GothamBold
speedButton.Text = "Speed: OFF (16)"
speedButton.Parent = gui
makeDraggable(speedButton)
buttonPressAnim(speedButton)
TweenService:Create(speedButton, TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
	{Position = UDim2.new(0, 20, 0, 100)}):Play()

-- GOLD GLOW
local glow1 = Instance.new("UIStroke")
glow1.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
glow1.Color = Color3.fromRGB(255, 215, 0)
glow1.Thickness = 2
glow1.Parent = speedButton

speedButton.MouseButton1Click:Connect(function()
	speedOn = not speedOn
	if player.Character then
		player.Character:WaitForChild("Humanoid").WalkSpeed = speedOn and fastSpeed or normalSpeed
	end
	speedButton.Text = speedOn and "Speed: ON (30)" or "Speed: OFF (16)"
end)

-- SPAWN BUTTON
local spawnButton = Instance.new("TextButton")
spawnButton.Size = UDim2.new(0, 180, 0, 50)
spawnButton.Position = UDim2.new(0, -200, 0, 160)
spawnButton.BackgroundColor3 = Color3.fromRGB(212, 175, 55) -- Gold
spawnButton.TextColor3 = Color3.fromRGB(30, 30, 30)
spawnButton.Font = Enum.Font.GothamBold
spawnButton.TextScaled = true
spawnButton.Text = "Set Spawn"
spawnButton.Parent = gui
makeDraggable(spawnButton)
buttonPressAnim(spawnButton)
TweenService:Create(spawnButton, TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
	{Position = UDim2.new(0, 20, 0, 160)}):Play()

-- GOLD GLOW
local glow2 = Instance.new("UIStroke")
glow2.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
glow2.Color = Color3.fromRGB(255, 215, 0)
glow2.Thickness = 2
glow2.Parent = spawnButton

spawnButton.MouseButton1Click:Connect(function()
	if player.Character then
		local root = player.Character:WaitForChild("HumanoidRootPart")
		savedSpawnCFrame = root.CFrame
		spawnButton.Text = "Spawn Saved âœ…"
		task.delay(1.2, function()
			spawnButton.Text = "Set Spawn"
		end)
	end
end)
